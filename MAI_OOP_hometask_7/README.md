# Лабораторная работа 7. Паттерны проектирования
# Автор: Головенко Анатолий, группа М8О-212Б-22, вариант 6

Вы разрабатываете редактор подземелья для новой RPG игры Balagur Fate 3. Ваша задача сделать программу, которая позволит моделировать базовые локации, расставляя на них NPC (non-player characters).

Редактор должен позволять делать следующие действия:
1. Добавлять новые NPC по разным координатам (типы объектов предопределены заданием)
a. NPC размещаются в квадрате 0<=x<=500 метров, 0<=y<=500 метров
b. У каждого типа объекта помимо координат должно быть уникальное имя.
2. Сохранять объекты в файл и загружать из файла
3. Печатать перечень объектов на экран (с типом объектов, координатами и именем)
4. Запускать боевой режим с указанием дальности, на которой могут сражаться NPC. В боевом режиме NPC начинают сражаться каждый с каждым (если дальность позволяет), проигравший NPC – удаляется. При этом погибнуть могут и оба NPC.

При создании программы обязательно использовать паттерны:
- Какой-нибудь из вариантов Factory для создания NPC и загрузки NPC из файла
- Visitor – для проведения цикла сражения
- Observer – для печати событий о совершенных убийствах. Сделать два класса Observer – для записи в файл “log.txt” и для печати на экран.


Вариант 2: Медведь, Эльф, Разбойник. Эльфы убивают разбойников, Разбойники убивают разбойников, Медведь убивает Эльфов

Модифицируйте вашу лабораторную работу No6 следующим образом:
• Должно быть реализовано три потока:
o Поток, который осуществляет передвижение NPC на определенное расстояние
(см. таблицу), а также определяет, что два NPC находятся на расстоянии убийства (см. таблицу). Если два NPC вступили в «бой», то он создает задачу для потока, осуществляющего бои.
o Поток, который осуществляет бои. Если один npc может убивать другой, то каждый npc «кидает 6-гранный кубик» определяя силу атаки и силу защиты (соответственно). Если сила атаки больше, чем сила защиты – то происходит убийство.
o Мертвые npc не передвигаются (у нас тут без некромантов).
o Живые npc не могут покинуть карту (размер задается через константы, например
100 x 100)
o Основной поток раз в секунду печатает карту. Мертвые npc на карте не
отображаются.
• Осуществить контроль доступа к разделяемым ресурсов с помощью std::shared_lock и
std::lock_guard
• Осуществить контроль к потоку вывода std::cout через std::lock_guard
• Потоки могут запускаться как std::thread с использованием лямбда функций или
функторов (классов с перегруженным оператором operator())
• Вначале игры должно создаваться 50 npc в случайных локациях.
• Игра должна останавливаться через 30 секунд и выводить на экран список выживших